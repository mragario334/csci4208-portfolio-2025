<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zombie Survival - Streets</title>
<link rel="stylesheet" href="styles/style.css">
</head>
<body>
<header>
    <h1>ðŸ§Ÿ Zombie Survival</h1>
    <button id="restart-btn" class="button">Restart Game</button>
    <table class="inventory-table">
      <tr><th>Coins</th><th>Keys</th><th>Weapon Cards</th></tr>
      <tr><td id="coins">0</td><td id="keys">0</td><td id="weaponCards">0</td></tr>
    </table>
</header>

<script>
// Restart button clears all progress
document.getElementById('restart-btn').onclick = function() {
  localStorage.clear();
  location.href = "index.html"; // go back to homepage
};
</script>

<main class="scene active">
<div class="intro-box">
<h2>Street of Panic</h2>
<p id="description">Loading scene...</p>
<div class="choices" id="choices-container"></div>
</div>
</main>

<script>
// Initialize inventory and flags if needed
if(!localStorage.getItem('coins')) localStorage.setItem('coins','0');
if(!localStorage.getItem('keys')) localStorage.setItem('keys','0');
if(!localStorage.getItem('weaponCards')) localStorage.setItem('weaponCards','0');
if(!localStorage.getItem('stayedHome')) localStorage.setItem('stayedHome','false');
if(!localStorage.getItem('weaponCard')) localStorage.setItem('weaponCard','false');
if(!localStorage.getItem('supermarketUnlocked')) localStorage.setItem('supermarketUnlocked','false');

function updateInventoryDisplay(){
  document.getElementById('coins').textContent = localStorage.getItem('coins');
  document.getElementById('keys').textContent = localStorage.getItem('keys');
  document.getElementById('weaponCards').textContent = localStorage.getItem('weaponCards');
}

function addChoice(text, href){
  const container = document.getElementById('choices-container');
  const a = document.createElement('a');
  a.href = href;
  a.className = 'button';
  a.textContent = text;
  container.appendChild(a);
}

window.onload = function(){
  updateInventoryDisplay();
  const coins = parseInt(localStorage.getItem('coins'));
  const keys = parseInt(localStorage.getItem('keys'));
  const supermarketUnlocked = localStorage.getItem('supermarketUnlocked') === 'true';
  const stayedHome = localStorage.getItem('stayedHome') === 'true';
  const description = document.getElementById('description');
  const container = document.getElementById('choices-container');
  container.innerHTML = ""; // clear old buttons

  description.textContent = "You are in the streets. Chaos surrounds you.";

 // Branching choices
addChoice("Enter the police station", "scene4.html"); // fatal without weapon card
addChoice("Go to the subway", "scene5.html");

// Home
addChoice("Go back home", "scene1.html");

// Supermarket logic
if(supermarketUnlocked){
  addChoice("Enter the supermarket", "scene3.html"); // unlocked, no key needed
} else if(keys > 0){
  addChoice("Enter the supermarket (requires key)", "scene3.html"); // will use key first time
} else {
  addChoice("Try to enter the supermarket (needs a key)", "#");
}


};
</script>
</body>
</html>
