<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zombie Survival - Police Station</title>
<link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <header>
        <h1>ðŸ§Ÿ Zombie Survival</h1>
        <button id="restart-btn" class="button">Restart Game</button>
        <table class="inventory-table">
          <tr><th>Coins</th><th>Keys</th><th>Weapon Cards</th></tr>
          <tr><td id="coins">0</td><td id="keys">0</td><td id="weaponCards">0</td></tr>
        </table>
      </header>
      
      <script>
      // Restart button clears all progress
      document.getElementById('restart-btn').onclick = function() {
        localStorage.clear();
        location.reload();
      };
      </script>
      

<main class="scene active">
<div class="intro-box" id="scene-text">
<h2>Police Station</h2>
<p id="description">Loading scene...</p>
<div class="choices" id="choices-container"></div>
</div>
</main>

<script>
if (!localStorage.getItem('coins')) localStorage.setItem('coins','0');
if (!localStorage.getItem('keys')) localStorage.setItem('keys','0');
if (!localStorage.getItem('weaponCards')) localStorage.setItem('weaponCards','0');
if (!localStorage.getItem('weaponCard')) localStorage.setItem('weaponCard','false');

function updateInventoryDisplay() {
  document.getElementById('coins').textContent = localStorage.getItem('coins');
  document.getElementById('keys').textContent = localStorage.getItem('keys');
  document.getElementById('weaponCards').textContent = localStorage.getItem('weaponCards');
}

function resetGame() {
  localStorage.setItem('coins','0');
  localStorage.setItem('keys','0');
  localStorage.setItem('weaponCards','0');
  localStorage.setItem('stayedHome','false');
  localStorage.setItem('weaponCard','false');
  updateInventoryDisplay();
}

function addChoice(text, href) {
  const container = document.getElementById('choices-container');
  const a = document.createElement('a');
  a.href = href;
  a.className = 'button';
  a.textContent = text;
  container.appendChild(a);
}

window.onload = function() {
  updateInventoryDisplay();
  const hasWeaponCard = localStorage.getItem('weaponCard') === 'true';
  const description = document.getElementById('description');

  if (hasWeaponCard) {
    description.textContent = "You enter the police station. An officer lunges at you, but a shard of glass appears just in time. You slice him and escape. You barely escaped with your life...that couldn't have been a coincidence.";
    let currentCards = parseInt(localStorage.getItem('weaponCards'));
    localStorage.setItem('weaponCards', Math.max(currentCards-1,0));
    localStorage.setItem('weaponCard','false');
    updateInventoryDisplay();
    addChoice("Exit to the streets", "scene2.html");
    addChoice("Return to your house", "scene1.html");
  } else {
    description.innerHTML = "You approach the officer. He is infected and lunges at you. You have nothing to defend yourself.";
    const deathMsg = document.createElement('h1');
    deathMsg.style.color="#f05c5c";
    deathMsg.style.marginTop="20px";
    deathMsg.textContent="ðŸ’€ YOU DIED ðŸ’€";
    document.getElementById('scene-text').appendChild(deathMsg);

    const container = document.getElementById('choices-container');
    const restartBtn = document.createElement('a');
    restartBtn.href="index.html";
    restartBtn.className="button";
    restartBtn.textContent="Restart Game";
    restartBtn.onclick = resetGame;
    container.appendChild(restartBtn);
  }
};
</script>
</body>
</html>
