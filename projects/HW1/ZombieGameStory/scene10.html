<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zombie Survival - Laboratory</title>
<link rel="stylesheet" href="styles/style.css">
</head>
<body>
<header>
  <h1>ðŸ§Ÿ Zombie Survival</h1>
  <button id="restart-btn" class="small-red-btn">Restart Game</button>
  <table class="inventory-table">
    <tr><th>Coins</th><th>Keys</th><th>Weapon Cards</th></tr>
    <tr>
      <td id="coins">0</td>
      <td id="keys">0</td>
      <td id="weaponCards">0</td>
    </tr>
  </table>
</header>

<main class="scene active">
  <div class="intro-box" id="scene-text">
    <h2>Laboratory</h2>
    <p id="description"></p>
    <div class="choices" id="choices-container"></div>
  </div>
</main>

<script>
// Restart button
document.getElementById('restart-btn').onclick = function() {
  localStorage.clear();
  location.href = "index.html";
};

if(!localStorage.getItem('coins')) localStorage.setItem('coins','0');
if(!localStorage.getItem('keys')) localStorage.setItem('keys','0');
if(!localStorage.getItem('weaponCards')) localStorage.setItem('weaponCards','0');

function updateInventoryDisplay() {
  document.getElementById('coins').textContent = localStorage.getItem('coins');
  document.getElementById('keys').textContent = localStorage.getItem('keys');
  document.getElementById('weaponCards').textContent = localStorage.getItem('weaponCards');
}

function addChoice(text, href){
  const container = document.getElementById('choices-container');
  const a = document.createElement('a');
  a.href = href;
  a.className = "button";
  a.textContent = text;
  container.appendChild(a);
}

window.onload = function(){
  updateInventoryDisplay();
  const container = document.getElementById('choices-container');
  container.innerHTML = "";
  const description = document.getElementById('description');

  const pharmacyLoot = localStorage.getItem('pharmacyLoot');

  if(pharmacyLoot === 'antidote'){
    description.textContent = "You enter the laboratory with the antidote in hand. The room is filled with chemical vials, glass beakers, and strange apparatuses. You quickly combine the components from the pharmacy with laboratory chemicals to synthesize a serum that can counteract the virus.";

    description.innerHTML += "<br><br>The serum glows faintly green as you pour it into the containment tanks. Soon, the infected outside begin to calm, and the chaos subsides. Humanity has a chance again.";

    addChoice("Celebrate your success!", "index.html");
  } else {
    description.textContent = "You arrive at the laboratory, but you have nothing to synthesize an antidote. The virus spreads uncontrollably, and thereâ€™s nothing you can do.";
    
    addChoice("Accept your fate...", "index.html");
  }
};
</script>
</body>
</html>
